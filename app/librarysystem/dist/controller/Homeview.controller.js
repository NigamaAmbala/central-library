sap.ui.define(["./BaseController","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/odata/v2/ODataModel","sap/m/MessageBox","sap/ui/model/json/JSONModel"],function(e,i,o,n,t,s,a){"use strict";return e.extend("com.app.librarysystem.controller.Homeview",{onInit:function(){var e=new t("/v2/BooksSRV/");this.getView().setModel(e);const i=new a({username:"",password:"",email:"",phonenumber:"",address:""});this.getView().setModel(i,"localModel")},onLoginCredentials:function(){var e=this.getView().byId("idusernameInput").getValue();var i=this.getView().byId("idPasswordInput").getValue();if(e==="admin"&&i==="admin"){const e=this.getOwnerComponent().getRouter();e.navTo("RouteAdmin")}else{alert("Invalid login Credentials")}},loginbutton:async function(){if(!this.ologinDailog){this.ologinDailog=await i.load({id:this.getView().getId(),name:"com.app.librarysystem.Fragments.loginDialog",controller:this});this.getView().addDependent(this.ologinDailog)}this.ologinDailog.open()},onCloseDialog:function(){if(this.ologinDailog.isOpen()){this.ologinDailog.close()}},Userloginbutton:async function(){if(!this.oUserloginDailog){this.oUserloginDailog=await i.load({id:this.getView().getId(),name:"com.app.librarysystem.Fragments.UserloginDailog",controller:this});this.getView().addDependent(this.oUserloginDailog)}this.oUserloginDailog.open()},onCloseUserDialog:function(){if(this.oUserloginDailog.isOpen()){this.oUserloginDailog.close()}},onUserLoginCredentials:function(){var e=this.getView();var i=e.byId("idusernameInput1").getValue();var t=e.byId("idPasswordInput1").getValue();if(!i||!t){s.error("please enter username and password.");return}var a=this.getView().getModel();a.read("/Users",{filters:[new o("username",n.EQ,i),new o("password",n.EQ,t)],success:function(e){if(e.results.length>0){var i=e.results[0].ID;var o=this.getOwnerComponent().getRouter();o.navTo("RouteUser",{ID:i})}else{s.error("Invalid username or password.")}}.bind(this),error:function(){s.error("An error occured during login.")}})},Signbutton:async function(){if(!this.oSigninDailog){this.oSigninDailog=await i.load({id:this.getView().getId(),name:"com.app.librarysystem.Fragments.SigninDialog",controller:this});this.getView().addDependent(this.oSigninDailog)}this.oSigninDailog.open()},onCloseSigninDialog:function(){if(this.oSigninDailog.isOpen()){this.oSigninDailog.close()}},onSignUP:async function(){const e=this.getView().getModel("localModel").getProperty("/"),i=this.getView().getModel("ModelV2");var o=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;var n=/^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$/;if(!(o.test(e.email)&&n.test(e.phonenumber))){s.success("please enter valid email and phonenumber ");return}try{await this.createData(i,e,"/Users");this.oSigninDailog.close();s.success("Registration is successful")}catch(e){this.oSigninDailog.close();s.error("user already exits")}}})});
//# sourceMappingURL=Homeview.controller.js.map